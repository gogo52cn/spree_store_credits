<fieldset id="redeem" data-hook>
  <legend align="center"><%= Spree.t(:redeem) %></legend>
  <div data-hook="checkout_redeem_step">
<% if session[:have_a_coupon_code] %>
    <p class='field' data-hook='coupon_code'>
   <label>Please enter your coupon code if you have one.</label><br>
      <%= form.text_field :coupon_code %>
    </p>
  </div>
<% end %>

<% if (spree_current_user && spree_current_user.store_credits_total > 0) %>
<% usable_amount = number_with_precision(@order.store_credit_maximum_usable_amount, :precision => 2, :separator => '.', :delimiter => '') %>
<br style='clear:both;' />
<p><%= Spree.t('you_have_store_credit',
       :amount => number_to_currency(spree_current_user.store_credits_total))%>
<br>
  <label><%= Spree.t('enter_desired_amount_of_store_credit') %></label><br />
  <%= form.text_field :store_credit_amount, :size => 19, :value => usable_amount, :data => { :store_credit_maximum_amount => usable_amount, :store_credit_maximum_amount_message => Spree.t('store_credit_maximum_amount', :amount => number_to_currency(@order.store_credit_maximum_usable_amount)) } %>
</p>
<% end %>
</fieldset>

<br class="space" />

<div class="form-buttons" data-hook="buttons">
  <%= submit_tag Spree.t(:save_and_continue), :class => 'continue button primary hrv-fade' %>
  <script>Spree.disableSaveOnClick();</script>
</div>
